(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(9343)}])},9343:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Z}});var r=n(5893),a=n(4306),s=n(6844),i=n.n(s),l=e=>{let{balance:t}=e,{publicKey:n}=(0,a.O)();return(0,r.jsxs)("div",{className:"bg-white shadow-sm rounded-lg p-3 w-full flex items-center justify-start space-x-4",children:[(0,r.jsx)("div",{className:"rounded-full shadow-sm overflow-hidden inline-block",children:(0,r.jsx)(i(),{string:(null==n?void 0:n.toString())||"",size:40})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-lg font-semibold text-gray-700",children:"Current Balance"}),(0,r.jsxs)("p",{className:"text-gray-600 text-md",children:[t," Blax"]})]})]})},o=n(4718),c=JSON.parse('{"L":"E9r4Nxg5zBaefmaTzKYTVCem3YDsCXKKvyrZuQEZyKp8"}'),u=n(7294),d=n(7908),m=n(716),f=n(5423),g=n(8467),x=n(2655),h=n(7043);let p=async(e,t,n,r,a,s)=>{let i=new d.YW;i.feePayer=r;let l=await (0,f.Am)(t,r,!1,g.H_,g._u),o=await (0,f.Am)(t,n.publicKey,!1,g.H_,g._u);i.add(y(r,n.publicKey,a,s));let c=await e.getAccountInfo(l);return c||(console.log("Will include fee for creating ".concat(l.toBase58()," ATA")),i.add(w(r,l,t))),i.add(b(o,l,n.publicKey,a)),i},b=(e,t,n,r)=>{let a=(0,x.$B)(e,t,n,100*r,[],g.H_);return a},w=(e,t,n)=>{let r=(0,h.Ek)(e,t,e,n);return r},y=(e,t,n,r)=>{let a=d.yc.transfer({fromPubkey:e,toPubkey:t,lamports:parseInt((r*n*d.j5).toString())});return a},N=async(e,t,n)=>{let r=await (0,f.Am)(t,n,!1,g.H_,g._u),a=await e.getAccountInfo(r);if(!a)return 0;let s=await e.getTokenAccountBalance(r);return s.value.uiAmount||0},j=async(e,t)=>{let n=await e.getSignaturesForAddress(t,{limit:5}),r=e.rpcEndpoint.includes("devnet")?"devnet":e.rpcEndpoint.includes("testnet")?"testnet":"mainnet",a=await Promise.all(n.map(async t=>await e.getTransaction(t.signature,{commitment:"finalized",maxSupportedTransactionVersion:0}))),s=a.map(e=>{let t=null==e?void 0:e.transaction.message,n=(null==e?void 0:e.transaction.signatures)||[],a=t.instructions,s=t.accountKeys,i=a.find(e=>"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"===s[e.programIdIndex].toString()&&["transfer"].includes(function(e){let t=m.Z.decode(e),n=t[0];switch(n){case 3:return"transfer";case 7:return"mintTo";default:return"unknown"}}(e.data)));if(i&&n.length>0){let e=i.accounts[1],t=s[e].toString(),a=function(e){let t=m.Z.decode(e),n=new DataView(t.buffer,t.byteOffset,t.byteLength).getUint32(1,!0);return n}(i.data),l="https://explorer.solana.com/tx/".concat(n[0],"?cluster=").concat(r),o="https://explorer.solana.com/address/".concat(t,"?cluster=").concat(r);return{receiver:t,amount:a/100,signature:n[0],transactionLink:l,addressLink:o}}return null}).filter(e=>null!==e);return s};var v=n(4173),_=n(5007),E=n(9073),A=n(4155),T=()=>{let[e,t]=(0,u.useState)(""),{connection:n}=(0,o.R)(),{publicKey:s,sendTransaction:i}=(0,a.O)(),l=(0,_.I0)(),{setSalesHistory:m,setBalance:f}=E.globalActions,g=A.env.NEXT_PUBLIC_TOKEN_OWNER_KEY_PAIR||"",x=new d.nh(c.L),h=Uint8Array.from(g.split(",").map(Number)),b=d.RG.fromSecretKey(h),w=async r=>{if(r.preventDefault(),!n||!s)return v.Am.warning("Please install or connect your wallet");if(!x)return v.Am.warning("Please provide a TOKEN MINT ADDRESS");if(!g)return v.Am.warning("Please provide a TOKEN OWNER KEYPAIR");let a=await p(n,x,b,s,Number(e),7e-4);await v.Am.promise(new Promise(async(e,r)=>{try{let r=await i(a,n,{signers:[b]});t(""),await n.confirmTransaction(r,"finalized"),console.log("Transaction signature: ".concat(r));let o=await j(n,b.publicKey);l(m(o));let c=await N(n,x,s);l(f(c)),e(r)}catch(e){console.error("Transaction failed:",e),r(e)}}),{pending:"Approve transaction...",success:"Transaction successful \uD83D\uDC4C",error:"Encountered error \uD83E\uDD2F"})};return(0,r.jsxs)("form",{onSubmit:w,children:[(0,r.jsx)("input",{type:"number",value:e,min:"1",placeholder:"E.g. 1 Blax token, (".concat(7e-4," SOL per token)"),required:!0,onChange:e=>t(e.target.value),className:"mt-1 block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm mb-4 "}),(0,r.jsx)("button",{type:"submit",disabled:!e||"0"===e||!s||s.toString()===b.publicKey.toString(),className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-orange-500 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-orange-300",children:"Buy Tokens"})]})},k=n(6009),K=()=>{let[e,t]=(0,u.useState)(!1);return(0,u.useEffect)(()=>{t(!0)},[]),(0,r.jsx)("header",{className:"p-4 bg-gray-800 mb-4",children:(0,r.jsxs)("nav",{className:"flex justify-between items-center max-w-6xl mx-auto",children:[(0,r.jsx)("p",{className:"text-white",children:"Blax Coin"}),e&&(0,r.jsx)(k.a,{style:{backgroundColor:"#F97316",color:"white"}})]})})},S=n(1664),O=n.n(S),P=n(9583);let C=e=>"".concat(e.substring(0,4),"...").concat(e.substring(e.length-4));var B=e=>{let{mintHistory:t}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-lg font-bold text-gray-700",children:"Recently Purchased"}),(0,r.jsx)("ul",{className:"mt-2 text-gray-500",children:t.map((e,t)=>(0,r.jsxs)("li",{className:"mb-2 flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsx)(O(),{href:e.addressLink,target:"_blank",rel:"noopener noreferrer",className:"font-bold hover:text-orange-500",children:C(e.receiver.toString())})," ","- ",(0,r.jsxs)("span",{children:[e.amount," Blax Token"]})]}),(0,r.jsx)(O(),{href:e.transactionLink,target:"_blank",rel:"noopener noreferrer",className:" hover:text-orange-500",children:(0,r.jsx)(P.CkN,{size:12})})]},t))})]})},I=n(9008),R=n.n(I),D=n(549),L=n(4155);function Z(){let{connection:e}=(0,o.R)(),{publicKey:t}=(0,a.O)(),n=(0,_.I0)(),{setSalesHistory:s,setBalance:i}=E.globalActions,m=new d.nh(c.L),f=L.env.NEXT_PUBLIC_TOKEN_OWNER_KEY_PAIR||"",g=Uint8Array.from(f.split(",").map(Number)),x=d.RG.fromSecretKey(g),[h,p]=(0,u.useState)(!0),{salesHistory:b,balance:w}=(0,_.v9)(e=>e.globalStates);(0,u.useEffect)(()=>{y()},[n,i,t]);let y=async()=>{let r=await j(e,x.publicKey);if(n(s(r)),t){let r=await N(e,m,t);n(i(r))}p(!1)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(R(),{children:[(0,r.jsx)("title",{children:"Grim Reap6r"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsxs)("div",{className:"h-screen bg-gray-100",children:[(0,r.jsx)(K,{}),(0,r.jsx)("div",{className:"h-[100px]"}),(0,r.jsxs)("main",{className:"max-w-lg mx-auto p-4 space-y-4",children:[(0,r.jsx)(T,{}),h?(0,r.jsx)(D.Z,{height:70,className:"mb-2"}):(0,r.jsx)(l,{balance:w}),h?(0,r.jsx)(D.Z,{count:5}):(0,r.jsx)(B,{mintHistory:b})]})]})]})}}},function(e){e.O(0,[445,358,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);